<!DOCTYPE html>
<html lang="en">
	<head>
		<title>全景</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<script type="text/javascript" src="js/zepto/zepto.js"></script>
        <script type="text/javascript" src="js/zepto/detect.js"></script>
        <script type="text/javascript" src="js/zepto/event.js"></script>
        <script type="text/javascript" src="js/zepto/ajax.js"></script>
        <script type="text/javascript" src="js/zepto/form.js"></script>
        <script type="text/javascript" src="js/zepto/fx.js"></script>
        <script type="text/javascript" src="js/zepto/fx_methods.js"></script>
        <script type="text/javascript" src="js/zepto/data.js"></script>
        <script type="text/javascript" src="js/zepto/assets.js"></script>
        <script type="text/javascript" src="js/zepto/selector.js"></script>
        <script type="text/javascript" src="js/zepto/zTouch.js"></script>		
        <script type="text/javascript" src="js/easeljs-NEXT.combined.js"></script>	
        <script type="text/javascript" src="js/overall2d.js"></script>
        <style type="text/css">
        body{
          margin: 0px;
        }
		#overallFrame{
			overflow:hidden;
			position:relative;
			}
		#nav2D{
			position:absolute;
			top:0px;
			left:0px;
			}
        </style>
	</head>
	<body>
		<div id="overallFrame">
            	<canvas id="nav2D"></canvas>
        </div>
        		
        	



		<script>

		
		var returnData;
			
			var returnDataA


			
	    	
			$("html").css("font-size",$(window).width()/320*20);

		returnDataA={
              		hotDotData:{
              			image:"texture/overall.jpg",
              			hotPoint:[
              				{
              					point:[550,550],
                        area:[[500,500],[500,600],[600,600],[600,500]],
              					data:{
              						id:"",
                          door:true,
              						name:"门1"
              					}
              				},
              				{
              					point:[670,540],
                        area:[[620,490],[620,590],[720,590],[720,490]],
              					data:{
              						id:"",
                          door:false,
              						name:"商品1",
              						price:"",
              						size:"",
              						image:""
              					}
              				},
              				{
              					point:[400,150],
                        area:[[350,100],[350,200],[450,200],[450,100]],
              					data:{
              						id:"",
                          door:false,
              						name:"商品2",
              						price:"",
              						size:"",
              						image:""
              					}
              				}
              				]
              		}
              	}
              	var nav2D = new overall2d();
		    	nav2D.setContainer("nav2D");
		    	nav2D.setSourURL("");
		    	//nav2D.setSourURL("http://test.3vjia.com");
		    	nav2D.init();
		    	nav2D.defaultP(1);
		    	nav2D.clfn=function(data){
		    		console.log(data);
		    		alert("点了"+data.name)
		    	}

		    	nav2D.reload(returnDataA.hotDotData);
	    	nav2D.ready=function(){
			$("#overallFrame").width($(window).width());
			$("#overallFrame").height($(window).height());
          $("#nav2D").height($(window).height());
		$("#overall").height($(window).height());
        $("#nav2D").width((nav2D.getWidth())*($(window).height()/(nav2D.getHeight())));
		$("#overall").width((nav2D.getWidth())*($(window).height()/(nav2D.getHeight())));
       $(window).scroll(function(){
          $(window).scrollTop(0);
        })
        };	
				
				
			

			
			
			function onWindowResize(){
				$("#overallFrame").width($(window).width());
			$("#overallFrame").height($(window).height());
			$("#nav2D").height($(window).height());
		$("#overall").height($(window).height());
        $("#nav2D").width((nav2D.getWidth())*($(window).height()/(nav2D.getHeight())));
		$("#overall").width((nav2D.getWidth())*($(window).height()/(nav2D.getHeight())));
		}
		window.addEventListener( 'resize', onWindowResize, false );

		</script>
	</body>
</html>
